<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calculadora Fantasy</title>
  <meta name="theme-color" content="#0e1117">
  <meta name="msapplication-navbutton-color" content="#0e1117">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="#0e1117">
  <link rel="icon" type="image/png" href="logo.png">
  <link rel="apple-touch-icon" type="image/png" href="logo.png">
  <link rel="apple-touch-icon-precomposed" type="image/png" href="logo.png">
<!--  <meta name="viewport" content="width=device-width, initial-scale=1">-->
  <meta name="google-adsense-account" content="ca-pub-7891666149137266">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QXF4YKPSMD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-QXF4YKPSMD');
  </script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      background: rgb(14, 17, 23);
      font-family: 'Segoe UI', sans-serif;
      color: white;
      overflow-x: hidden;
      overflow-y: auto;
      zoom: 1.3;
    }

    .wrapper {
      width: 100%;
      height: 100%;
      position: relative;
    }

    /* LANDING */
    .landing {
      position: relative;
      min-height: 10svh;
      width: 100%;
      height: 100%;
      background: rgb(14, 17, 23);
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      z-index: 3;
      transition: opacity 0.4s ease;
      padding: 6rem 1rem 4rem;
      text-align: center;
    }

    .landing.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .logo {
      position: absolute;
      top: 2rem;
      right: 3rem;
    }

    .logo img {
      height: 50px;
    }

    h1 {
      position: static;
      top: 7rem;
      font-size: 2rem;
      margin-bottom: 0;
    }

    h4 {
      position: static;
      top: 10rem;
      font-size: 1.05rem;
      font-weight: 400;
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 2rem;
    }

    .enter-button {
      position: static;
      top: 12rem;
      padding: 12px 24px;
      font-size: 1.1rem;
      background: rgb(255, 76, 76);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
      margin-bottom: 2rem;
      margin-top: 1.5rem;
    }

    .enter-button:hover {
      background: rgb(200, 50, 50);
    }

    .slide {
      position: static;
      top: 18rem;
      max-width: 600px;
      margin-top: 2rem;
      animation: fadeIn 0.5s ease;
    }

    .slide h2 {
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
    }

    .slide p {
      font-size: 1rem;
      opacity: 0.9;
    }

    .slide img {
      margin-top: 1rem;
      max-width: 100%;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .slide img:hover {
      transform: scale(1.02);
      box-shadow: 0 0 15px rgba(255, 76, 76, 0.8);
    }

    .slider-controls {
      position: relative;
      top: -50%;
      width: 100%;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
    }

    .slider-button {
      background: rgba(255, 76, 76, 0.7);
      border: none;
      color: white;
      font-size: 1.5rem;
      padding: 6px 12px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .slider-button:hover {
      background: rgba(255, 76, 76, 1);
    }

    .slide-content {
      opacity: 1;
      transition: opacity 0.8s ease;
    }

    .slide-content.fade-out {
      opacity: 0;
    }

    .slide-content.fade-in {
      opacity: 1;
    }

    footer {
      position: static;
      bottom: 2rem;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.7);
      padding-bottom: 2rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* IFRAME */
    .iframe-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100dvh;
      background: rgb(14, 17, 23);
      z-index: 1;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    iframe.loaded {
      opacity: 1;
    }

  .loading-overlay {
    position: fixed; inset: 0;
    background: rgba(14,17,23,.95);
    display: none; align-items: center; justify-content: center;
    z-index: 2; color: #fff; font-size: 1.1rem;
  }
  .spinner {
    width: 32px; height: 32px; border: 3px solid #555; border-top-color: #ff4c4c;
    border-radius: 50%; animation: spin 0.9s linear infinite; margin-right: 10px;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- LANDING -->
    <div class="landing" id="landing">
      <!-- LOGO -->
      <div class="logo">
        <img src="logo.png" alt="Logo Calculadora Fantasy">
      </div>
      <h1>Bienvenido a la Calculadora Fantasy</h1>
      <h4>Con soporte para: LaLiga Fantasy & Biwenger</h4>
      <button class="enter-button" onclick="enterApp()">Entrar</button>

      <div class="slide" id="slide" onmouseover="pauseSlider()" onmouseout="resumeSlider()">
        <div class="slide-content" id="slideContent">
          <!-- Contenido inicial se carga con JS -->
        </div>
        <!-- se rellena con JS -->
        <div class="slider-controls">
          <button class="slider-button" onclick="prevSlide()">&#10094;</button>
          <button class="slider-button" onclick="nextSlide()">&#10095;</button>
        </div>
      </div>

      <footer>
        <p>ðŸ“© Contacto: <a href="mailto:calculadora.fantasy@gmail.com">calculadora.fantasy@gmail.com</a></p>
      </footer>
    </div>

    <!-- APP loader -->
    <div id="loading" class="loading-overlay">
      <div class="spinner"></div> Cargando jugadoresâ€¦
    </div>
<!--    &lt;!&ndash; APP &ndash;&gt;-->
<!--    <div class="iframe-container">-->
<!--      <iframe-->
<!--        id="appFrame"-->
<!--        src="https://calculadorafantasy.streamlit.app/~/+/?embed=true"-->
<!--        allowfullscreen-->
<!--        onload="this.classList.add('loaded')">-->
<!--      </iframe>-->
<!--    </div>-->
  </div>

  <script>
    const slides = [
      {
        title: "ðŸ’° Mejores 11s con presupuesto",
        desc: "Calcula la mejor alineaciÃ³n posible segÃºn tu presupuesto disponible.",
        img: "img/presupuesto.png"
      },
      {
        title: "âš½ Mi mejor 11 posible",
        desc: "Elige tus jugadores disponibles y descubre tu mejor once ideal.",
        img: "img/once.png"
      },
      {
        title: "ðŸ“‹ Lista de jugadores",
        desc: "Consulta estadÃ­sticas, precios y puntuaciones esperadas de todos los jugadores.",
        img: "img/lista.png"
      },
      {
        title: "ðŸ“ˆ Analizar mi mercado",
        desc: "Selecciona varios jugadores para compararlos entre ellos.",
        img: "img/mercado.png"
      }
    ];

    let currentSlide = 0;
    let intervalId;
    const slideContainer = document.getElementById('slide');

    function renderSlide(index) {
      const slide = slides[index];
      const content = document.getElementById('slideContent');

      // Fade out
      content.classList.remove('fade-in');
      content.classList.add('fade-out');

      // Espera a que termine el fade-out antes de cambiar contenido
      setTimeout(() => {
        content.innerHTML = `
          <h2>${slide.title}</h2>
          <p>${slide.desc}</p>
          <img src="${slide.img}" alt="${slide.title}">
        `;

        // Fade in
        content.classList.remove('fade-out');
        content.classList.add('fade-in');
      }, 300); // DuraciÃ³n del fade-out (debe coincidir con CSS)
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % slides.length;
      renderSlide(currentSlide);
    }

    function prevSlide() {
      currentSlide = (currentSlide - 1 + slides.length) % slides.length;
      renderSlide(currentSlide);
    }

    function startSlider() {
      renderSlide(currentSlide);
      intervalId = setInterval(nextSlide, 6000); // 6 segundos
    }

    function pauseSlider() {
      clearInterval(intervalId);
    }

    function resumeSlider() {
      intervalId = setInterval(nextSlide, 6000);
    }

    function enterApp() {
      // document.getElementById('landing').classList.add('hidden');
      // }
      document.getElementById('loading').style.display = 'flex';
      document.getElementById('landing').classList.add('hidden');

      const mode = "landing";
      let path;

      if (window.location.protocol === "file:") {
        // Local: must specify index.html explicitly
        // path = `app/index.html?src=${encodeURIComponent(mode)}`;
        path = `app/index.html`;
      } else {
        // Online: clean URL works fine
        // path = `app/?src=${encodeURIComponent(mode)}`;
        path = `app/`;
      }

      const target = new URL(path, window.location.href);
      console.log("Redirecting to:", target.toString());

      setTimeout(() => {
        window.location.href = target.toString();
      }, 200);
    }

    startSlider();

    window.addEventListener('pageshow', (e) => {
      const fromHistory = e.persisted ||
        (performance.getEntriesByType('navigation')[0]?.type === 'back_forward');

      if (fromHistory) {
        const loading = document.getElementById('loading');
        const landing = document.getElementById('landing');
        loading.style.display = 'none';
        landing.classList.remove('hidden');
      }
    });
  </script>
</body>
</html>
